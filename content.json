{"meta":{"title":"My World","subtitle":"Talk is cheap,show me your code!","description":null,"author":"张昊","url":"http://yoursite.com"},"pages":[{"title":"标签~","date":"2017-03-23T16:18:33.000Z","updated":"2017-04-12T17:33:25.000Z","comments":false,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""},{"title":"分类~","date":"2017-04-12T17:31:16.000Z","updated":"2017-04-12T17:34:12.000Z","comments":false,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"Handler不正确使用可能导致内存泄漏","slug":"Handler不正确使用可能导致内存泄漏","date":"2017-04-12T09:43:12.000Z","updated":"2017-04-12T17:35:28.000Z","comments":true,"path":"2017/04/12/Handler不正确使用可能导致内存泄漏/","link":"","permalink":"http://yoursite.com/2017/04/12/Handler不正确使用可能导致内存泄漏/","excerpt":"","text":"","categories":[{"name":"android","slug":"android","permalink":"http://yoursite.com/categories/android/"}],"tags":[{"name":"android","slug":"android","permalink":"http://yoursite.com/tags/android/"}]},{"title":"mac下管理多个ssh秘钥对","slug":"mac-os生成多个ssh秘钥对","date":"2017-04-12T03:06:55.000Z","updated":"2017-04-12T17:38:06.000Z","comments":true,"path":"2017/04/12/mac-os生成多个ssh秘钥对/","link":"","permalink":"http://yoursite.com/2017/04/12/mac-os生成多个ssh秘钥对/","excerpt":"一、日常废话昨晚看到一篇提升博客访问速度的文章，其中一点是配置多线路解析，国内路线走国内平台，国外线路走 GitHub Pages。其中，作者提到了国内的代码托管平台 Coding，该平台免费提供静态资源托管，所以我们以前利用 hexo搭建的 GitHub Pages 博客也可以轻松迁移过来。具体步骤我写在另一篇博客中，这里不多讲了。","text":"一、日常废话昨晚看到一篇提升博客访问速度的文章，其中一点是配置多线路解析，国内路线走国内平台，国外线路走 GitHub Pages。其中，作者提到了国内的代码托管平台 Coding，该平台免费提供静态资源托管，所以我们以前利用 hexo搭建的 GitHub Pages 博客也可以轻松迁移过来。具体步骤我写在另一篇博客中，这里不多讲了。 二、遇到的问题及解决办法1.问题场景 公司项目托管在 GitLab,个人项目托管在 GitHub 和 Coding，用到三对 ssh 秘钥， Coding 与 GitHub 一样，需要将使用者的公钥上传到服务器以保证安全传输。所以我用下面的命令生成了 Coding平台专用的秘钥对，至于它的原理，另找时间研究吧。 ssh-keygen -t rsa -C &quot;username@email.com&quot; 换mac后我先 clone 的公司的项目，当时生成的秘钥文件是 id_rsa，对应于 GitLab。这次为 Coding 生成的秘钥不能再用默认命名以免覆盖，另取名 coding_key。问题就出在这里，我把 coding_key.pub 中的公钥上传到Coding后，用以下命令测试还是 Permission denied。 ssh -T git@git.coding.net 2.问题的原因参考这里。 每次连接远程A服务器时，本机的ssh客户端默认发送id_rsa（ssh-keygen生成秘钥对时的默认命名）私钥到A服务端进行验证，如果本机只有这一个秘钥对且生成时没有更改默认命名，那自然不会有问题。但如果本机还与B通信，就需要生成另一对秘钥，上传公钥到B。连接B服务器时，ssh客户端发送的仍然是id_rsa,而与B服务器存储的公钥对应不上，自然就报错了。 我想要的是，不同的ssh秘钥对共存且互不干扰，连接 Server 时自动选择对应私钥。 3.解决方案： https://segmentfault.com/q/1010000000835302 https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/ https://my.oschina.net/stefanzhlg/blog/529403 4.我的做法： 上面提到的解决办法，都是先用ssh-add ~/.ssh/xxx将私钥添加到ssh-agent,然后再编写config文件。我实践了一下，发现在mac系统中，使用 ssh-add 添加和编写 config 文件这两步，只要有一步做到就可以满足需求。不知道window 下是不是必须同时实现才可以。","categories":[{"name":"information security","slug":"information-security","permalink":"http://yoursite.com/categories/information-security/"}],"tags":[{"name":"ssh","slug":"ssh","permalink":"http://yoursite.com/tags/ssh/"}]},{"title":"提升博客的访问速度","slug":"提升博客的访问速度","date":"2017-04-11T16:21:22.000Z","updated":"2017-04-13T17:01:48.000Z","comments":true,"path":"2017/04/12/提升博客的访问速度/","link":"","permalink":"http://yoursite.com/2017/04/12/提升博客的访问速度/","excerpt":"一、日常废话GitHub 是美帝家的好东西，我们天朝子民访问它还不受GFW限制，但是访问速度却很拙计，如何提升 GitHub 博客的访问速度呢，一番搜索，学到几发新姿势。","text":"一、日常废话GitHub 是美帝家的好东西，我们天朝子民访问它还不受GFW限制，但是访问速度却很拙计，如何提升 GitHub 博客的访问速度呢，一番搜索，学到几发新姿势。 二、各种姿势 迁移到国内平台 将博客复制一份到国内代码托管平台，我用的 Coding。实现步骤跟 GitHub 类似，可以参考官方教程。 我在添加新的ssh公钥到 Coding 时，遇到了问题，请看[mac下管理多个ssh秘钥对]。 ​","categories":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"}]},{"title":"换mac啦","slug":"换mac啦","date":"2017-03-21T14:23:28.000Z","updated":"2017-04-12T17:36:36.000Z","comments":true,"path":"2017/03/21/换mac啦/","link":"","permalink":"http://yoursite.com/2017/03/21/换mac啦/","excerpt":"一、写在前面的废话 经历了一周的纠结，也错失几个好价，我终于狠下心，咬紧牙，一把掏出钱包，不对，是掏出手机付款了。机器到手后，所有的心疼瞬间丢到召唤师峡谷，太TM爽了！入眼的是无任何颗粒感的视网膜屏，双手放在键盘上，手掌能感受到带有丝丝凉意的金属质感，手指码字根本停不下来。我想，我终于理解那些推荐MBP的人了。","text":"一、写在前面的废话 经历了一周的纠结，也错失几个好价，我终于狠下心，咬紧牙，一把掏出钱包，不对，是掏出手机付款了。机器到手后，所有的心疼瞬间丢到召唤师峡谷，太TM爽了！入眼的是无任何颗粒感的视网膜屏，双手放在键盘上，手掌能感受到带有丝丝凉意的金属质感，手指码字根本停不下来。我想，我终于理解那些推荐MBP的人了。 二、一些常用快捷键暂时把常用的列举一下，以后再慢慢补充吧。 command + shift + 3/4 截屏/截图 command + m 最小化窗口 command + h 隐藏窗口 command + q 关闭当前程序 command + r 刷新 command + t/w 新建一个选项卡/关闭当前选项卡 command + shift + . 显示隐藏文件夹和文件 command + shift + g 前往指定文件夹 上面是我这几天用的最多的，在知乎上看到一张图，基本上涵盖了最常用的吧： 三、开发环境的搭建 公司项目用的 Android 原生和 React Native混合开发的模式，所以需要搭建 Android 环境和 RN 环境。 Google 了一下，发现苹果有个软件包管理工具 Homebrew 很好用，装上试试 Homebrew是Mac OSX上的软件包管理工具，能在Mac中方便的安装软件或者卸载软件，相当于linux下的apt-get、yum神器；Homebre可以在Mac上安装一些OS X没有的UNIX工具，Homebrew将这些工具统统安装到了 /usr/local/Cellar 目录中，并在 /usr/local/bin 中创建符号链接。 安装很简单，一行指令即可，虽然不懂啥意思… 1/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; HomeBrew常用指令 brew search xxx 搜索软件 brew install xxx 安装 brew cask install xxx 安装软件 与上面的区别我不懂，知乎上有两个回答供参考传送门 brew uninstall xxx 卸载 brew list 显示已经安装的软件 我手上这台机器是 os x 10.12.3的，没有自带 Java，所以我们需要手动安装。我们可以去 oracle 官网下载 jdk for mac，也可以用上面提到的 brew cask install java 来进行安装。我没有配置 java 的环境变量，似乎也能用 java -version，神奇。 android studio 直接下载 .dmg 文件即可，它自动设置了 java 的路径， sdk可以通过studio下载,或者找个国内镜像网站下好后放到 sdk 目录下。 ps: 要想在终端下使用 ADB 命令，还得配置sdk的环境变量，参考传送门 进入终端，在用户目录下，输入命令。该命令的作用是如果不存在.bash_profile文件，则创建该文件。 touch .bash_profile 再输入命令，该命令的作用是用文本编辑器TextEdit打开.bash_profile文件 open -e .bash_profile 在编辑器中加入以下路径 export PATH=${PATH}:/Users/xxx(你的sdk路径)/sdk/platform-tools export PATH=${PATH}:/Users/xxx(你的sdk路径)/sdk/tools 保存退出，重启终端，检验是否设置成功 adb version RN 环境搭建，可参考传送门。我简单说下步骤： 安装 node.js ,直接brew install node走你。 安装后，给 npm 设置镜像（GFW你懂得） npm config set registry https://registry.npm.taobao.org --global npm config set disturl https://npm.taobao.org/dist --global 安装 react native 命令行工具 npm install -g react-native-cli 四、终端的 bogon 今晚回家打开终端后，发现终端名称变成了 bogon, what?这他么是啥，搜了一下，找到个解决方案传送门。我用的第一种方法，scutil --set HostName new_hostname ，亲测可行。","categories":[{"name":"杂七杂八","slug":"杂七杂八","permalink":"http://yoursite.com/categories/杂七杂八/"}],"tags":[{"name":"Mac","slug":"Mac","permalink":"http://yoursite.com/tags/Mac/"}]},{"title":"ARGB与RGBA","slug":"ARGB与RGBA","date":"2017-03-01T14:40:39.000Z","updated":"2017-04-13T14:35:41.000Z","comments":true,"path":"2017/03/01/ARGB与RGBA/","link":"","permalink":"http://yoursite.com/2017/03/01/ARGB与RGBA/","excerpt":"一、写在前面的废话今天在rn中调整一个view的backgroudColor时，想设置透明度适中的色值，按照Android原生代码的习惯写成’#77000000’。这种写法在Android项目的xml文件中是没问题的，但是放在js文件的Style中就是不起作用，查了一下，色值有argb和rgba两种格式。","text":"一、写在前面的废话今天在rn中调整一个view的backgroudColor时，想设置透明度适中的色值，按照Android原生代码的习惯写成’#77000000’。这种写法在Android项目的xml文件中是没问题的，但是放在js文件的Style中就是不起作用，查了一下，色值有argb和rgba两种格式。 二、ARGB在Android中颜色值通常遵循RGB/ARGB的标准，以“#”开头，以16进制表示，常用的格式为 1234#RGB#RRGGBB#ARGB#AARRGGBB 上面四个字母都很容易理解，分别是Alpha,Red,Green,Blue。透明度分为256阶（0-255），计算机上用16进制表示为（00-ff）。透明就是0阶，不透明就是255阶,如果50%透明就是127阶。 三、RGBA这四个字母的意思跟上面讲的完全一样，只是透明度放到了最后。粗略的查了一下，RGBA是CSS3标准（这属于前端的知识范畴了，有机会再去学习）新增的，CSS2中色彩模式只有RGB色彩模式和十六进制模式。 我个人理解，这两种格式只是顺序上不同，应用于不同的编程语言中。需要记住，react native中是将表示透明度的两位十六进制数放在最后。","categories":[{"name":"react native","slug":"react-native","permalink":"http://yoursite.com/categories/react-native/"}],"tags":[{"name":"react native","slug":"react-native","permalink":"http://yoursite.com/tags/react-native/"}]},{"title":"清单文件中activity属性windowSoftInputMode研究","slug":"清单文件中activity属性windowSoftInputMode研究","date":"2017-02-20T16:15:08.000Z","updated":"2017-02-21T16:02:54.000Z","comments":true,"path":"2017/02/21/清单文件中activity属性windowSoftInputMode研究/","link":"","permalink":"http://yoursite.com/2017/02/21/清单文件中activity属性windowSoftInputMode研究/","excerpt":"一、写在前面的废话: 今天研究聊天详情页时，发现点击输入框获得焦点后，弹起的软键盘没有盖住EditText,而是将输入框顶了上去。一番搜索，原来是通过在清单文件中给对应activity设置属性windowSoftInputMode做到的。接下来就研究一下这个属性吧。","text":"一、写在前面的废话: 今天研究聊天详情页时，发现点击输入框获得焦点后，弹起的软键盘没有盖住EditText,而是将输入框顶了上去。一番搜索，原来是通过在清单文件中给对应activity设置属性windowSoftInputMode做到的。接下来就研究一下这个属性吧。 二、知识点：​ windowSoftInputMode可以取九个值，分别是： android:windowSoftInputMode=[&quot;stateUnspecified&quot;, &quot;stateUnchanged&quot;, &quot;stateHidden&quot;, &quot;stateAlwaysHidden&quot;, &quot;stateVisible&quot;, &quot;stateAlwaysVisible&quot;, &quot;adjustUnspecified&quot;, &quot;adjustResize&quot;, &quot;adjustPan&quot;] ​ 从命名就可以看出，前六个值跟状态有关，后三个值跟布局的调整有关。关于这两类取值，可以看google官方API给出的解释: The state of the soft keyboard — whether it is hidden or visible — when the activity becomes the focus of user attention.The adjustment made to the activity’s main window — whether it is resized smaller to make room for the soft keyboard or whether its contents pan to make the current focus visible when part of the window is covered by the soft keyboard. ​ 前者是当activity获得用户的焦点时，软键盘是弹出还是隐藏；后者是，当软键盘弹出的时候，当前activity的主窗口是否缩小布局以使软键盘有足够的空间展示，或者使布局里的内容向上滑动以使当前获得焦点的View可见。 The setting must be one of the values listed in the following table, or a combination of one “state...“ value plus one “adjust...“ value. Setting multiple values in either group — multiple “state...“ values, for example — has undefined results. Individual values are separated by a vertical bar (|). For example: ​ 这段话指出，这个属性必须从九个值里取，可以只取一个值，也可以是 state…与adjust的组合，如下： 1&lt;activity android:windowSoftInputMode=\"stateVisible|adjustResize\" . . . &gt; ​ 关于九个值各自的介绍，官方也给出了解释： Value Description stateUnspcified The state of the soft keyboard (whether it is hidden or visible) is not specified. The system will choose an appropriate state or rely on the setting in the theme.This is the default setting for the behavior of the soft keyboard. (这个是默认缺省属性值，显示或者隐藏由系统来确定，或者由当前主题来确定) stateUnchanged The soft keyboard is kept in whatever state it was last in, whether visible or hidden, when the activity comes to the fore.(经测试，似乎没什么卵用。) stateHidden The soft keyboard is hidden when the user chooses the activity — that is, when the user affirmatively navigates forward to the activity, rather than backs into it because of leaving another activity. stateAlwaysHidden The soft keyboard is always hidden when the activity’s main window has input focus. stateVisible The soft keyboard is visible when that’s normally appropriate (when the user is navigating forward to the activity’s main window). stateAlwaysVisible The soft keyboard is made visible when the user chooses the activity — that is, when the user affirmatively navigates forward to the activity, rather than backs into it because of leaving another activity.(设置了这个值或上一个，通过测试发现，进入activity后，软键盘会自动弹起。而设置stateHidden和stateAlwaysHidden则不会。) adjustUnspecified It is unspecified whether the activity’s main window resizes to make room for the soft keyboard, or whether the contents of the window pan to make the current focus visible on-screen. The system will automatically select one of these modes depending on whether the content of the window has any layout views that can scroll their contents. If there is such a view, the window will be resized, on the assumption that scrolling can make all of the window’s contents visible within a smaller area.This is the default setting for the behavior of the main window.(缺省值，到底是缩小布局还是滚动布局中获得焦点控件以上的组件，取决于当前布局中是否有可以滚动的View。) adjustResize The activity’s main window is always resized to make room for the soft keyboard on screen.(触发View的onSizeChanged方法，布局高度缩小了，给软键盘腾出空间。) adjustPan The activity’s main window is not resized to make room for the soft keyboard. Rather, the contents of the window are automatically panned so that the current focus is never obscured by the keyboard and users can always see what they are typing. This is generally less desirable than resizing, because the user may need to close the soft keyboard to get at and interact with obscured parts of the window. ​ 妈蛋的，上面的属性值我挨个试了一遍，但与它给出的结果不一致，我都糊涂了。不过，我发现几个比较靠谱的规律： 用的比较多的是adjustResize和adjustPan，前者是缩小布局得大小，后者是向上移动焦点控件之上的View。 当布局中，焦点组件上方有可滚动的View时，设置为adjustPan，会将当前焦点组件上方的所有View向上移动，以使得焦点组件完全露出，且焦点组件下方的View被软键盘遮盖，这种会导致View被顶出界面；设置为adjustResize，可滚动的View会缩小其高度，给软键盘腾出空间，然后其中焦点组件上方的View会向上滚动，这样可滚动的View上方的View不会滚动，即保持位置不变。 如果焦点组件上方没有可滚动的View，设置为adjustPan，跟上面效果一样；设置为adjustResize，不起作用，焦点组件被盖住了！","categories":[{"name":"android","slug":"android","permalink":"http://yoursite.com/categories/android/"}],"tags":[{"name":"android","slug":"android","permalink":"http://yoursite.com/tags/android/"}]},{"title":"第一篇——利用hexo和github搭建静态博客","slug":"第一篇——利用hexo和github搭建静态博客","date":"2017-02-19T15:52:16.000Z","updated":"2017-04-12T17:37:00.000Z","comments":true,"path":"2017/02/19/第一篇——利用hexo和github搭建静态博客/","link":"","permalink":"http://yoursite.com/2017/02/19/第一篇——利用hexo和github搭建静态博客/","excerpt":"最近一周，效率实在不高，某些逻辑我还是一团浆糊。回到家也没有接触别的知识，惭愧不已，这个周日的晚上逼自己将4个月前挖的坑填上，利用hexo和github pages 搭建自己的静态Blog。","text":"最近一周，效率实在不高，某些逻辑我还是一团浆糊。回到家也没有接触别的知识，惭愧不已，这个周日的晚上逼自己将4个月前挖的坑填上，利用hexo和github pages 搭建自己的静态Blog。 教程可以参考这篇文章 传送门 。 坑还没有填满，下次再研究一下： md的语法 添加评论的功能—多说 不蒜子的统计 主题美化 2017–03-26 我来填坑了。 markdown 语法 写了几篇博客，把常用的都记住了，还有一些等以后补充吧。以下都在语法前面加了转义字符”\\”。 # 标题，最多六个，既一级标题到六级标题 [显示的文字](url) 网站的超链接 ![显示的文字](url) 网络图片 > 引用文字 `` 代码 三个` 代码块，后面还可以跟语言名字来显示不同的高亮 - 无序列表 数字 + . + 空格 有序列表 评论 之前看hexo的教程，大多数博主用的社会化评论系统都是多说，但是，多说官方最近宣布即将关闭，传送门，这真是一个悲伤的故事。再查教程，发现正在用的next主题支持多种评论系统，传送门，考虑到稳定性和墙的因素，暂时采用了来必力。配置十分简单，如下： 登陆 来必力 获取你的 LiveRe UID。 编辑 next 主题配置文件， 编辑 livere_uid 字段，设置为 livere_uid: #your livere_uid 不蒜子统计功能 ，照搬官方教程 全局配置 编辑 主题配置文件 中的busuanzi_count的配置项。当enable: true时，代表开启全局开关。若site_uv、site_pv、page_pv的值均为false时，不蒜子仅作记录而不会在页面上显示。 站点UV配置 当site_uv: true时，代表在页面底部显示站点的UV值。 site_uv_header和site_uv_footer为自定义样式配置，相关的值留空时将不显示，可以使用（带特效的）font-awesome。显示效果为[site_uv_header]UV值[site_uv_footer]。 12345&gt; # 效果：本站访客数12345人次&gt; site_uv: true&gt; site_uv_header: 本站访客数&gt; site_uv_footer: 人次&gt; 站点PV配置 当site_pv: true时，代表在页面底部显示站点的PV值。 site_pv_header和site_pv_footer为自定义样式配置，相关的值留空时将不显示，可以使用（带特效的）font-awesome。显示效果为[site_pv_header]PV值[site_pv_footer]。 123456&gt;&gt; # 效果：本站总访问量12345次&gt; site_pv: true&gt; site_pv_header: 本站总访问量&gt; site_pv_footer: 次&gt; 单页面PV配置 当page_pv: true时，代表在文章页面的标题下显示该页面的PV值（阅读数）。 page_pv_header和page_pv_footer为自定义样式配置，相关的值留空时将不显示，可以使用（带特效的）font-awesome。显示效果为[page_pv_header]PV值[page_pv_footer]。 12345&gt; # 效果：本文总阅读量12345次&gt; page_pv: true&gt; page_pv_header: 本文总阅读量&gt; page_pv_footer: 次&gt; 主题美化 之前用的是 yilia，作者的blog。后来发现了更适合我口味的next，文档详细，配置简单，学习成本低，强烈推荐。","categories":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"}]}]}